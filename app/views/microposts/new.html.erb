<% provide(:title,'投稿') %>
<div class="micropost-new">
  <div class="micropost-new-title">
    <h3>新規投稿</h3>
  </div>
  <div class="micropost-new-container">
    <div class="micropost-new-form">
      <%= form_with(model: @micropost, local: true) do |f| %>
        <%= render 'shared/error_messages', object: f.object %>
        <span class="micropost-new-image">
          <%= f.file_field :image, accept: "image/jpeg,image/png" %>
        </span>
        <div class="micropost-new-field">
          <%= f.text_area :content, :rows => "5", placeholder: "キャプションを書く" %>
        </div>
        <%= f.submit "投稿！", class: "btn btn-primary micropost-submit" %>
      <% end %>
    </div>
  </div>
</div>
<script type="text/javascript">
  $("#micropost_image").bind("change", function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert("5MBを超えています。 5MB以下のファイルを選択してください");
      $("#micropost_image").val("");
    }
  });
</script>